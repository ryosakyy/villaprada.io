<div class="page-header">
    <h2>Gesti√≥n de Clientes</h2>
</div>

<div class="actions-bar">
    <input type="text" placeholder="Buscar por DNI o nombre..." [(ngModel)]="textoBusqueda" (input)="buscarCliente()">

    <button class="btn-primary" (click)="abrirModal()">+ Nuevo Cliente</button>
</div>

<div class="table-container table-responsive">
    <table>
        <thead>
            <tr>
                <th>DNI</th>
                <th>Nombre</th>
                <th>Tel√©fono</th>
                <th>Correo</th>
                <th>Direcci√≥n</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf="cargando">
                <td colspan="6" style="text-align:center;">Cargando...</td>
            </tr>
            <tr *ngIf="!cargando && clientes.length === 0">
                <td colspan="6" style="text-align:center;">No hay datos.</td>
            </tr>
            <tr *ngFor="let cliente of clientes">
                <td>{{ cliente.dni }}</td>
                <td>{{ cliente.nombre }}</td>
                <td>{{ cliente.telefono || '-' }}</td>
                <td>{{ cliente.correo || '-' }}</td>
                <td>{{ cliente.direccion || '-' }}</td>
                <td class="actions-cell">
                    <button class="btn-edit" (click)="editarCliente(cliente)">‚úèÔ∏è</button>
                    <button class="btn-delete" (click)="eliminarCliente(cliente.id)">üóëÔ∏è</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div class="modal-overlay" *ngIf="mostrarModal" (click.self)="cerrarModal()">
    <div class="modal-content">
        <button class="btn-close-x" (click)="cerrarModal()">√ó</button>

        <h3>{{ nuevoCliente.id ? 'Editar Cliente' : 'Registrar Nuevo Cliente' }}</h3>

        <div class="form-body">

            <div class="form-group">
                <label>DNI *</label>
                <input #dniBox type="text" [value]="nuevoCliente.dni" placeholder="Ej. 12345678" maxlength="8">
            </div>

            <div class="form-group">
                <label>Nombre Completo *</label>
                <input #nombreBox type="text" [value]="nuevoCliente.nombre" placeholder="Nombres y Apellidos">
            </div>

            <div class="form-group">
                <label>Tel√©fono</label>
                <input #telBox type="text" [value]="nuevoCliente.telefono" placeholder="Ej. 999888777">
            </div>

            <div class="form-group">
                <label>Correo</label>
                <input #emailBox type="email" [value]="nuevoCliente.correo" placeholder="correo@ejemplo.com">
            </div>

            <div class="form-group">
                <label>Direcci√≥n</label>
                <input #dirBox type="text" [value]="nuevoCliente.direccion" placeholder="Av. Principal 123">
            </div>

            <div class="modal-actions">
                <button class="btn-secondary" (click)="cerrarModal()">Cancelar</button>

                <button class="btn-primary"
                    (click)="guardarManual(dniBox.value, nombreBox.value, telBox.value, emailBox.value, dirBox.value)">
                    Guardar
                </button>
            </div>
        </div>
    </div>
</div>